<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:rf="http://java.sun.com/jsf/composite/remendo/form"
	template="/Templates/templatePadrao.xhtml">

	<ui:define name="head">
	</ui:define>

	<ui:define name="conteudoPadrao">
		<p:tab title="Entrada Com Nota Fiscal">
			<rf:formularioEdicao id="notaFiscal"
								raiz="#{notaFiscalRaiz}"
								srcEditor="Movimentacao/NotaFiscal/EntradaNotaFiscal2/notaFiscalEditor.xhtml" 
								updateSalvar=":#{p:component('dialogConfirmarValorPanelGroup')}" />
			
			<rf:formularioPesquisa id="notaFiscalPesquisa" 
								  novoPadraoPesquisa="true"
								  raizConsulta="#{notaFiscalConsulta}"
								  novoAction="#{notaFiscalConsulta.novaInstancia()}"
								  srcTabela="Movimentacao/NotaFiscal/EntradaNotaFiscal2/notaFiscalTabela.xhtml"
								  srcConsulta="Movimentacao/NotaFiscal/EntradaNotaFiscal2/notaFiscalConsulta.xhtml" />
			
			<h:panelGroup id="dialogConfirmarValorPanelGroup" >
				<p:growl/>
				<p:dialog visible="#{notaFiscalRaiz.exibirDialogConfirmacaoValorNota}" 
						  closable="false" 
						  header="Confirmação do valor da Nota-Fiscal" 
						  modal="true" 
						  width="#{util.larguraTela * 0.4}" 
						  height="#{util.alturaTela * 0.1}"  >
					
					<h:form>
						<h:panelGrid columns="2" >
							<h:outputText value="O valor da nota é :" /> 
							<h:outputText value="#{notaFiscalRaiz.instancia.valorTotal}" >
								 <f:convertNumber currencySymbol="R$" type="currency"/>
							</h:outputText>
						</h:panelGrid>
						<h:panelGrid columns="2" >
							<p:commandButton value="Confirmar" 
											 action="#{notaFiscalRaiz.finalizarCadastro}" 
											 update=":#{p:component('notaFiscalEditorForm')} :#{p:component('dialogConfirmarValorPanelGroup')}" 
											 immediate="false" />
							<p:commandButton value="Cancelar" 
											 action="#{notaFiscalRaiz.ocultarDialogConfirmacaoValorNota}" 
											 update=":#{p:component('notaFiscal')} :#{p:component('dialogConfirmarValorPanelGroup')}"
											 immediate="false" />
						</h:panelGrid>
					</h:form>
				</p:dialog>
			</h:panelGroup>
			
		</p:tab>
	</ui:define>
</ui:composition>