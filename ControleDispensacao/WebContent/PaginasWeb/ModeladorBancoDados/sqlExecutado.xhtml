<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/Templates/templatePadrao.xhtml">

	<ui:define name="head">
	</ui:define>


	<ui:define name="conteudoPadrao">
		<p:tab id="modeladorBancoDados" title="Modelagem" >
			<h:form id="sqlExecutadoForm" prependId="false" >
				<p:dataTable id="tabelaSqlExecutado" 
							 value="#{sqlExecutadoConsulta.list}" 
							 var="linha"
							 dblClickSelect="true"
							 emptyMessage="Não foi encontrado registros" 
							 rows="10" 
							 paginator="true"
							 selectionMode="single" 
							 rowKey="#{linha.idSqlExecutado}">
							
					<p:column>
						<f:facet name="header"><h:outputText value="SQL" /></f:facet>
						<h:outputText value="#{linha.sql}" />
					</p:column>
					
					<p:column>
						<f:facet name="header"><h:outputText value="Data de Criação" /></f:facet>
						<h:outputText value="#{linha.dataCriacao}">
							<f:convertDateTime pattern="dd/MM/yyyy HH:mm"/>
						</h:outputText>
					</p:column>
					
					<p:column>
						<f:facet name="header"><h:outputText value="Executado" /></f:facet>
						<h:outputText value="#{linha.executadoBaseProducao.label}" />
					</p:column>
								
					<p:column style="width:60px; text-align: center;" >
						<p:commandLink update="padraoTabView:tabelaSqlExecutado"
									   action="#{sqlExecutadoHome.informaSqlNaoExecutado()}" 
									   title="Foi Executado" 
									   rendered="#{linha.executadoBaseProducao == 'S'}"
									   style="padding-right:10px;" >
							<f:setPropertyActionListener value="#{linha}" target="#{sqlExecutadoHome.instancia}" />
							<h:graphicImage value="/Imagens/feito16.png" />
						</p:commandLink>
						
						<p:commandLink  action="#{sqlExecutadoHome.informaSqlExecutado()}"
										update="padraoTabView:tabelaSqlExecutado" 
										rendered="#{linha.executadoBaseProducao == 'N'}"
										title="Não foi executado" 
										style="padding-right:10px;" >
							<f:setPropertyActionListener value="#{linha}" target="#{sqlExecutadoHome.instancia}" />
							<h:graphicImage value="/Imagens/delete16.gif" />
						</p:commandLink>
					</p:column>  
				</p:dataTable>

			</h:form>	
		</p:tab>
	</ui:define>
</ui:composition>
