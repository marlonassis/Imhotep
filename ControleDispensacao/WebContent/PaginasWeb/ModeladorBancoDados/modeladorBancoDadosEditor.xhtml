<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui">

	<h:panelGrid id="tipoMovimentoPanelGrid"
				 columns="3" 
				 width="100%" >
				 
		<h:panelGroup>
			<font color="red" >*</font><h:outputLabel for="nomeTabela" value="Tabela:"  /><br />
			<p:inputText id="nomeTabela" 
						 value="#{modeladorBancoDados.tabela.nomeTabela}" 
						 title="Informe o nome da tabela" />
		</h:panelGroup>
		
	</h:panelGrid>
	
	<p:fieldset legend="Propriedades"
				collapsed="false"
				toggleable="false">
		<h:panelGrid width="100%"
					 columns="3" >
			
			<h:panelGroup>
				<font color="red" >*</font><h:outputLabel for="nomePropriedade" value="Propriedade:"  /><br />
				<p:inputText id="nomePropriedade" 
							 value="#{modeladorBancoDados.propriedadeTabela.nomePropriedade}" 
							 title="Informe o nome da propriedade" />
			</h:panelGroup>
			
			<h:panelGroup> 
				<h:outputLabel for="tipoProp" value="Tipo:"  /><br />
				<p:selectOneMenu id="tipoProp"
								 value="#{modeladorBancoDados.propriedadeTabela.tipoPropriedade}" 
								 effect="fade">
		            <f:selectItem itemLabel="Boolean" 
		            			  itemValue="#{'boolean'}" /> 
		            <f:selectItem itemLabel="Character Varying" 
		            			  itemValue="#{'character varying'}" />
		            <f:selectItem itemLabel="Integer" 
		            			  itemValue="#{'integer'}" />
		            <f:selectItem itemLabel="Serial" 
		            			  itemValue="#{'serial'}" /> 
		            <f:selectItem itemLabel="Timestamp Without Time Zone" 
		            			  itemValue="#{'timestamp without time zone'}" />
	        	</p:selectOneMenu>
	        </h:panelGroup>
			
			<h:panelGroup> 
				<h:outputLabel for="nulo" value="Nulo:"  /><br />
				<p:selectOneRadio id="nulo"
								  value="#{modeladorBancoDados.propriedadeTabela.nulo}" 
								  effect="fade">
		            <f:selectItem itemLabel="Sim" 
		            			  itemValue="true" /> 
		            <f:selectItem itemLabel="Não" 
		            			  itemValue="false" />
		            <f:converter converterId="javax.faces.Boolean" /> 
	        	</p:selectOneRadio>
	        </h:panelGroup>
	        
	        <h:panelGroup> 
				 <p:commandLink action="#{modeladorBancoDados.adicionarPropriedade()}"
								update="padraoTabView:modeladorBancoDadosForm"
								title="Clique aqui para adicionar uma propriedade">
					<h:graphicImage value="/Imagens/add.png" />
				</p:commandLink>
	        </h:panelGroup>
		
		</h:panelGrid>
		
		<ui:repeat value="#{modeladorBancoDados.tabela.propriedades}"
				   var="prop">
			<h:outputText value="#{prop.nomePropriedade}" />
			#{'  '}
			<h:outputText value="#{prop.tipoPropriedade}" />
			#{'  '}
			<h:outputText value="#{prop.nulo ? 'Null' : 'Not Null'}" />
			<p:commandLink  action="#{modeladorBancoDados.removerPropriedade(prop)}"
							update="padraoTabView:modeladorBancoDadosForm"
							title="Apagar"
							immediate="true">
				<h:graphicImage value="/Imagens/delete.png" />
			</p:commandLink>
			<br/>
		</ui:repeat>
	</p:fieldset>
	
	<p:fieldset legend="Constraints"
				collapsed="false"
				toggleable="false">
		<h:panelGrid width="100%"
					 columns="3" >
			
			<h:panelGroup>
				<font color="red" >*</font><h:outputLabel for="nomeConstraint" value="Constraint:"  /><br />
				<p:inputText id="nomeConstraint" 
							 value="#{modeladorBancoDados.constraintTabela.nomeConstraint}" 
							 title="Informe o nome da constraint" />
			</h:panelGroup>
			
			<h:panelGroup> 
				<h:outputLabel for="tipoCons" value="Tipo:"  /><br />
				<p:selectOneMenu id="tipoCons"
								 value="#{modeladorBancoDados.constraintTabela.tipoConstraint}" 
								 effect="fade">
		            <f:selectItem itemLabel="Foreign Key" 
		            			  itemValue="#{'FOREIGN KEY'}" />
		            <f:selectItem itemLabel="Primary Key" 
		            			  itemValue="#{'PRIMARY KEY'}" /> 
		            <f:selectItem itemLabel="Unique" 
		            			  itemValue="#{'UNIQUE'}" />
	        	</p:selectOneMenu>
	        </h:panelGroup>
			
			<h:panelGroup>
				<h:outputLabel for="propriedadeLocal" value="Propriedade Local:"  /><br />
				<p:selectOneMenu id="propriedadeLocal"
								 value="#{modeladorBancoDados.constraintTabela.nomePropriedadeLocal}" 
								 effect="fade">
					<f:selectItem itemLabel="Selecione..." 
									  itemValue="" /> 
		            <f:selectItems value="#{modeladorBancoDados.tabela.propriedades}" 
		            			   var="propLocalCons"
		            			   itemLabel="#{propLocalCons.nomePropriedade}"
		            			   itemValue="#{propLocalCons.nomePropriedade}"/>  
	        	</p:selectOneMenu>
	        </h:panelGroup>
	        
	        <h:panelGroup id="tabelaReferenciaPanelGroup" >
				<h:outputLabel for="tabelaReferencia" value="Tabela de Referência:"  /><br />
				<p:selectOneMenu id="tabelaReferencia"
								 value="#{modeladorBancoDados.constraintTabela.nomeTabelaReferencia}" 
								 effect="fade">
		            <f:ajax event="change"
							listener="#{modeladorBancoDados.carregarPropriedadesReferencia()}"
							render="propriedadeReferenciaPanelGroup" />
					<f:selectItem itemLabel="Selecione..." 
									  itemValue="" /> 
		            <f:selectItems value="#{modeladorBancoDados.tabelas}"
		            			   var="tabelaReferenciaCons"
		            			   itemLabel="#{tabelaReferenciaCons}"
		            			   itemValue="#{tabelaReferenciaCons}"/>
	        	</p:selectOneMenu>
	        </h:panelGroup>
	        
	        <h:panelGroup id="propriedadeReferenciaPanelGroup" >
				<h:outputLabel for="propriedadeReferencia" value="Propriedade de Referência:"  /><br />
				<p:selectOneMenu id="propriedadeReferencia"
								 value="#{modeladorBancoDados.constraintTabela.nomePropriedadeReferencia}" 
								 effect="fade">
		            <f:selectItems value="#{modeladorBancoDados.propriedadesReferencia}" 
		            			   var="propRefCons"
		            			   itemLabel="#{propRefCons.nomePropriedade}"
		            			   itemValue="#{propRefCons.nomePropriedade}"/>  
	        	</p:selectOneMenu>
	        </h:panelGroup>
			
			<h:panelGroup> 
				<h:outputLabel for="tipoDelete" value="Tipo Delete:"  /><br />
				<p:selectOneMenu id="tipoDelete"
								 value="#{modeladorBancoDados.constraintTabela.tipoDelete}" 
								 effect="fade">
		            <f:selectItem itemLabel="No Action" 
		            			  itemValue="#{'NO ACTION'}" />
		            <f:selectItem itemLabel="Restrict" 
		            			  itemValue="#{'RESTRICT'}" /> 
		            <f:selectItem itemLabel="Cascade" 
		            			  itemValue="#{'CASCADE'}" />
		            <f:selectItem itemLabel="Set Null" 
		            			  itemValue="#{'SET NULL'}" />
		            <f:selectItem itemLabel="Set Default" 
		            			  itemValue="#{'SET DEFAULT'}" />
	        	</p:selectOneMenu>
	        </h:panelGroup>
			
			<h:panelGroup> 
				<h:outputLabel for="tipoUpdate" value="Tipo Update:"  /><br />
				<p:selectOneMenu id="tipoUpadate"
								 value="#{modeladorBancoDados.constraintTabela.tipoUpdate}" 
								 effect="fade">
		            <f:selectItem itemLabel="No Action" 
		            			  itemValue="#{'NO ACTION'}" />
		            <f:selectItem itemLabel="Restrict" 
		            			  itemValue="#{'RESTRICT'}" /> 
		            <f:selectItem itemLabel="Cascade" 
		            			  itemValue="#{'CASCADE'}" />
		            <f:selectItem itemLabel="Set Null" 
		            			  itemValue="#{'SET NULL'}" />
		            <f:selectItem itemLabel="Set Default" 
		            			  itemValue="#{'SET DEFAULT'}" />
	        	</p:selectOneMenu>
	        </h:panelGroup>
	        
	        <h:panelGroup> 
				 <p:commandLink action="#{modeladorBancoDados.adicionarConstraint()}"
								update="padraoTabView:modeladorBancoDadosForm"
								title="Clique aqui para adicionar a constraint">
					<h:graphicImage value="/Imagens/add.png" />
				</p:commandLink>
	        </h:panelGroup>
			
		</h:panelGrid>
		
		<ui:repeat value="#{modeladorBancoDados.tabela.constraints}"
				   var="cons">
			<h:outputText value="#{cons.nomeConstraint}" />
			<p:commandLink  action="#{modeladorBancoDados.removerConstraint(cons)}"
							update="padraoTabView:modeladorBancoDadosForm"
							title="Apagar"
							immediate="true">
				<h:graphicImage value="/Imagens/delete.png" />
			</p:commandLink>
			<br/>
		</ui:repeat>
	</p:fieldset>
	
</ui:composition>
