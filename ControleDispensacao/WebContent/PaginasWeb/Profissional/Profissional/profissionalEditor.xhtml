<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ri="http://java.sun.com/jsf/composite/remendo/input"
	xmlns:p="http://primefaces.org/ui">

	<h:panelGrid id="profissionalPanelGrid" columns="3" width="100%">

		<h:panelGroup id="estadoPanelGroup"
					  rendered="#{profissionalRaiz.instancia.especialidade.tipoConselho != null}">
			<h:outputLabel for="estado" value="Estado:" />
			<br />
			<p:selectOneMenu id="estado"
							 value="#{profissionalRaiz.instancia.estado}" 
							 effect="fade"
							 converter="estadoConversor">
				<f:selectItem itemLabel="Selecione..." itemValue="" />
				<f:selectItems value="#{estadoConsulta.list}" 
							   var="estado"
							   itemLabel="#{estado.nome}" 
							   itemValue="#{estado}" />
			</p:selectOneMenu>
		</h:panelGroup>

		<h:panelGroup id="numeroRegistroPanelGroup"
					  rendered="#{profissionalRaiz.instancia.especialidade.tipoConselho != null}">
			<h:outputLabel for="numeroRegistro" value="Registro:" />
			<br />
			<p:inputText id="numeroRegistro" 
						 required="false"
						 value="#{profissionalRaiz.instancia.registroConselho}"
						 title="Informe o número do registro no conselho do profissional" />
		</h:panelGroup>

		<h:panelGroup>
			<h:outputLabel for="matricula" value="Matrícula" />
			<br />
			<p:inputText id="matricula"
						 value="#{profissionalRaiz.instancia.matricula}" 
						 required="false"
						 onkeyup="apenasNumero(this);"
						 title="Informe a matrícula do profissional" />
		</h:panelGroup>

		<h:panelGroup>
			<font color="red">*</font>
			<h:outputLabel for="nome" value="Nome:" />
			<br />
			<p:inputText id="nome" 
						 required="true"
						 value="#{profissionalRaiz.instancia.nome}"
						 title="Informe o nome do profissional" />
		</h:panelGroup>

		<h:panelGroup>
			<font color="red">*</font>
			<h:outputLabel for="situacao" value="Situação:" />
			<br />
			<h:selectOneRadio id="situacao"
							  value="#{profissionalRaiz.instancia.situacao}" 
							  required="true"
							  title="Informe se o profissional está ativo ou inativo">
				<f:selectItems value="#{itensPadrao.situacaoEnumItens}" />
			</h:selectOneRadio>
		</h:panelGroup>

		<h:panelGroup>
			<font color="red">*</font>
			<h:outputLabel for="login" value="Login:" />
			<br />
			<p:inputText id="login"
						 value="#{profissionalRaiz.instancia.usuario.login}" 
						 required="true"
						 disabled="#{profissionalRaiz.edicao}"
						 title="Informe o apelido de acesso" />
		</h:panelGroup>

		<ri:inputAutoComplete id="unidade"
							  required="true" 
							  forceSelection="true"
							  completeMethod="#{unidadeAutoComplete.autoComplete}" 
							  itemValue="#{unidade}" 
							  itemLabel="#{unidade.nome}" 
							  var="unidade" 
							  value="#{profissionalRaiz.unidade}" 
							  label="Unidade" />
		

	</h:panelGrid>
	<p:separator id="separator" rendered="#{profissionalRaiz.edicao}" />
	  
	<h:outputText id="outPutTextItens"
				  style="font-weight:bold;"
				  value="Especialidades" 
				  rendered="#{profissionalRaiz.edicao}" />
	<div align="left" > 
		<h:panelGrid columns="2" rendered="#{profissionalRaiz.edicao}" >
			<h:panelGroup>
				<h:outputLabel for="tipoConselho" value="Tipo do conselho:" />
				<br />
				<p:selectOneMenu value="#{profissionalRaiz.especialidade.tipoConselho}"
								 effect="fade" 
								 converter="tipoConselhoConversor">
					<p:ajax event="change" update=":#{p:component('especialidadePanelGroup')}" />
					<f:selectItem itemLabel="Selecione..." itemValue="" />
					<f:selectItems value="#{tipoConselhoConsulta.list}"
								   var="tipoConselho" 
								   itemLabel="#{tipoConselho.descricaoSigla}"
								   itemValue="#{tipoConselho}" />
				</p:selectOneMenu>
			</h:panelGroup>
			
			<h:panelGroup id="especialidadePanelGroup">
				<h:outputLabel for="especialidade" value="Especialidade:" />
				<br />
				<p:selectOneMenu id="especialidade"
								 value="#{profissionalRaiz.especialidade}" 
								 effect="fade"
								 converter="especialidadeConversor">
					<f:selectItem itemLabel="Selecione..." itemValue="" />
					<f:selectItems value="#{profissionalRaiz.listaEspecialidade}"
								   var="especialidade" 
								   itemLabel="#{especialidade.descricao}"
								   itemValue="#{especialidade}" />
					<p:ajax event="change" listener="#{profissionalRaiz.addEspecialidadeProfissional}" update=":#{p:component('especialidadesProfissional')} :#{p:component('especialidadePanelGroup')}" />
				</p:selectOneMenu>
			</h:panelGroup>
			
			<h:panelGroup id="especialidadesProfissional" >		
				<p:dataList value="#{profissionalRaiz.instancia.especialidadesList}" var="e" type="ordered">  
				    #{e.descricao}#{' - '}<h:graphicImage value="/Imagens/delete32.png" width="16" height="16">
				    					   		<p:ajax event="click" listener="#{profissionalRaiz.remEspecialidadeProfissional(e)}" update=":#{p:component('especialidadesProfissional')}" />
				    						  </h:graphicImage>
				</p:dataList>
			</h:panelGroup>
		</h:panelGrid>
	</div>
</ui:composition>